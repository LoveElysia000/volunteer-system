# Generated with protoc-gen-openapi
# https://github.com/google/gnostic/tree/master/cmd/protoc-gen-openapi

openapi: 3.0.3
info:
    title: AuditService API
    description: 审核服务：提供待审核列表、执行审核、审核记录查询等接口
    version: 0.0.1
paths:
    /api/audits/approval:
        post:
            tags:
                - AuditService
            description: 执行审核通过动作
            operationId: AuditService_AuditApproval
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/audit.AuditApprovalRequest'
                required: true
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/audit.AuditApprovalResponse'
    /api/audits/records/:id:
        get:
            tags:
                - AuditService
            description: 获取单条审核记录详情
            operationId: AuditService_AuditRecordDetail
            parameters:
                - name: id
                  in: query
                  description: '审核记录 ID @gotags: path:"id,required"'
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/audit.AuditRecordDetailResponse'
    /api/audits/rejection:
        post:
            tags:
                - AuditService
            description: 执行审核驳回动作
            operationId: AuditService_AuditRejection
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/audit.AuditRejectionRequest'
                required: true
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/audit.AuditRejectionResponse'
    /api/audits/volunteer-join-org/pending:
        post:
            tags:
                - AuditService
            description: 获取志愿者加入组织待审核列表（支持关键词和分页筛选）
            operationId: AuditService_PendingVolunteerJoinOrgAuditList
            parameters:
                - name: keyword
                  in: query
                  description: '标题/副标题关键词 @gotags: query:"keyword"'
                  schema:
                    type: string
                - name: page
                  in: query
                  description: '页码（从 1 开始） @gotags: query:"page"'
                  schema:
                    type: integer
                    format: int32
                - name: pageSize
                  in: query
                  description: '每页条数 @gotags: query:"pageSize"'
                  schema:
                    type: integer
                    format: int32
                - name: status
                  in: query
                  description: '审核状态 @gotags: query:"status"'
                  schema:
                    type: array
                    items:
                        type: integer
                        format: int32
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/audit.PendingVolunteerJoinOrgAuditListResponse'
components:
    schemas:
        audit.AuditApprovalRequest:
            type: object
            properties:
                id:
                    type: string
                    description: '审核记录id @gotags: json:"id,required"'
                reason:
                    type: string
                    description: '原因 @gotags: json:"reason"'
            description: 执行审核请求参数
        audit.AuditApprovalResponse:
            type: object
            properties: {}
            description: 执行审核返回结果
        audit.AuditRecordDetail:
            type: object
            properties:
                id:
                    type: string
                    description: 审核记录 ID
                targetType:
                    type: integer
                    description: 审核目标类型
                    format: int32
                targetId:
                    type: string
                    description: 审核目标 ID
                auditorId:
                    type: string
                    description: 审核人 ID
                status:
                    type: integer
                    description: 审核状态
                    format: int32
                oldContent:
                    type: string
                    description: 审核前内容快照
                newContent:
                    type: string
                    description: 审核后内容快照
                auditResult:
                    type: integer
                    description: 审核结果
                    format: int32
                rejectReason:
                    type: string
                    description: 驳回原因
                auditTime:
                    type: string
                    description: 审核时间
                createdAt:
                    type: string
                    description: 记录创建时间
            description: 审核记录详情
        audit.AuditRecordDetailResponse:
            type: object
            properties:
                record:
                    allOf:
                        - $ref: '#/components/schemas/audit.AuditRecordDetail'
                    description: 审核记录详情
            description: 审核记录详情查询结果
        audit.AuditRejectionRequest:
            type: object
            properties:
                id:
                    type: string
                    description: '审核记录id @gotags: json:"id,required"'
                reason:
                    type: string
                    description: '原因 @gotags: json:"reason"'
            description: 执行审核驳回请求参数
        audit.AuditRejectionResponse:
            type: object
            properties: {}
            description: 执行审核驳回返回结果
        audit.PendingVolunteerJoinOrgAuditItem:
            type: object
            properties:
                targetId:
                    type: string
                    description: 审核目标 ID（org_members.id）
                status:
                    type: integer
                    description: 当前审核状态（业务侧约定枚举值）
                    format: int32
                title:
                    type: string
                    description: 主标题
                subTitle:
                    type: string
                    description: 副标题
                createdAt:
                    type: string
                    description: 创建时间（字符串时间格式由服务端统一约定）
            description: 志愿者加入组织待审核对象摘要信息
        audit.PendingVolunteerJoinOrgAuditListResponse:
            type: object
            properties:
                total:
                    type: integer
                    description: 总记录数
                    format: int32
                list:
                    type: array
                    items:
                        $ref: '#/components/schemas/audit.PendingVolunteerJoinOrgAuditItem'
                    description: 当前页数据
            description: 志愿者加入组织待审核列表查询结果
tags:
    - name: AuditService
