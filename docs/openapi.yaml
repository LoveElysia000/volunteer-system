# Generated with protoc-gen-openapi
# https://github.com/google/gnostic/tree/master/cmd/protoc-gen-openapi

openapi: 3.0.3
info:
    title: MembershipService API
    description: 志愿者-组织关联关系管理服务端接口
    version: 0.0.1
paths:
    /api/memberships/join:
        post:
            tags:
                - MembershipService
            description: 志愿者加入组织
            operationId: MembershipService_VolunteerJoinOrganization
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/membership.VolunteerJoinRequest'
                required: true
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/membership.VolunteerJoinResponse'
    /api/memberships/leave:
        post:
            tags:
                - MembershipService
            description: 志愿者退出组织
            operationId: MembershipService_VolunteerLeaveOrganization
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/membership.VolunteerLeaveRequest'
                required: true
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/membership.VolunteerLeaveResponse'
    /api/memberships/stats:
        get:
            tags:
                - MembershipService
            description: 成员统计信息
            operationId: MembershipService_MembershipStats
            parameters:
                - name: organizationId
                  in: query
                  description: '组织ID 可选 @gotags: query:"organizationId"'
                  schema:
                    type: string
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/membership.MembershipStatsResponse'
    /api/memberships/status/update:
        post:
            tags:
                - MembershipService
            description: |-
                todo 修改路由，不依赖ID
                 更新成员状态（审核通过/拒绝等）
            operationId: MembershipService_UpdateMemberStatus
            requestBody:
                content:
                    application/json:
                        schema:
                            $ref: '#/components/schemas/membership.MemberStatusUpdateRequest'
                required: true
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/membership.MemberStatusUpdateResponse'
    /api/organizations/{organizationId}/members:
        get:
            tags:
                - MembershipService
            description: 获取组织成员列表
            operationId: MembershipService_GetOrganizationMembers
            parameters:
                - name: organizationId
                  in: path
                  description: '组织ID 必填 @gotags: path:"organizationId,required"'
                  required: true
                  schema:
                    type: string
                - name: status
                  in: query
                  description: '状态筛选 可选 @gotags: query:"status"'
                  schema:
                    type: integer
                    format: int32
                - name: role
                  in: query
                  description: '角色筛选 可选 @gotags: query:"role"'
                  schema:
                    type: integer
                    format: int32
                - name: keyword
                  in: query
                  description: '搜索关键字 可选 @gotags: query:"keyword"'
                  schema:
                    type: string
                - name: page
                  in: query
                  description: '页码 必填 @gotags: query:"page,required"'
                  schema:
                    type: integer
                    format: int32
                - name: pageSize
                  in: query
                  description: '页大小 必填 @gotags: query:"pageSize,required"'
                  schema:
                    type: integer
                    format: int32
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/membership.OrganizationMembersResponse'
    /api/volunteers/{volunteerId}/organizations:
        get:
            tags:
                - MembershipService
            description: 查询志愿者加入的组织
            operationId: MembershipService_GetVolunteerOrganizations
            parameters:
                - name: volunteerId
                  in: path
                  description: '志愿者ID 必填 @gotags: path:"volunteerId,required"'
                  required: true
                  schema:
                    type: string
                - name: status
                  in: query
                  description: '状态筛选 可选 @gotags: query:"status"'
                  schema:
                    type: integer
                    format: int32
                - name: page
                  in: query
                  description: '页码 必填 @gotags: query:"page,required"'
                  schema:
                    type: integer
                    format: int32
                - name: pageSize
                  in: query
                  description: '页大小 必填 @gotags: query:"pageSize,required"'
                  schema:
                    type: integer
                    format: int32
            responses:
                "200":
                    description: OK
                    content:
                        application/json:
                            schema:
                                $ref: '#/components/schemas/membership.VolunteerOrganizationsResponse'
components:
    schemas:
        membership.MemberInfo:
            type: object
            properties:
                membershipId:
                    type: string
                    description: 成员关系ID
                volunteerId:
                    type: string
                    description: 志愿者ID
                volunteerName:
                    type: string
                    description: 志愿者姓名
                volunteerCode:
                    type: string
                    description: 志愿者编号
                organizationId:
                    type: string
                    description: 组织ID
                organizationName:
                    type: string
                    description: 组织名称
                status:
                    type: integer
                    description: 成员状态
                    format: int32
                role:
                    type: integer
                    description: 成员角色
                    format: int32
                position:
                    type: string
                    description: 申请职位
                motivation:
                    type: string
                    description: 申请动机
                expectedHours:
                    type: string
                    description: 期望工作时间
                joinDate:
                    type: string
                    description: 加入时间
                reviewDate:
                    type: string
                    description: 审核时间
                reviewComment:
                    type: string
                    description: 审核意见
                leaveDate:
                    type: string
                    description: 离开时间
                leaveReason:
                    type: string
                    description: 离开原因
                createdAt:
                    type: string
                    description: 创建时间
                updatedAt:
                    type: string
                    description: 更新时间
            description: MemberInfo 成员信息
        membership.MemberStatusUpdateRequest:
            type: object
            properties:
                accountId:
                    type: string
                    description: '组织管理者ID 必填 @gotags: json:"accountId,required"'
                membershipId:
                    type: string
                    description: '成员关系ID 必填 @gotags: json:"membershipId,required"'
                status:
                    type: integer
                    description: '成员状态 必填 @gotags: json:"status,required"'
                    format: int32
                reviewComment:
                    type: string
                    description: '审核意见 可选 @gotags: json:"reviewComment"'
            description: MemberStatusUpdateRequest 更新成员状态请求
        membership.MemberStatusUpdateResponse:
            type: object
            properties:
                message:
                    type: string
                    description: 消息
            description: MemberStatusUpdateResponse 更新成员状态响应
        membership.MembershipStatsResponse:
            type: object
            properties:
                pendingCount:
                    type: string
                    description: 待审核成员数量
                activeCount:
                    type: string
                    description: 活跃成员数量
                inactiveCount:
                    type: string
                    description: 非活跃成员数量
                suspendedCount:
                    type: string
                    description: 暂停成员数量
                totalCount:
                    type: string
                    description: 总成员数量
            description: MembershipStatsResponse 成员统计响应
        membership.OrganizationMemberInfo:
            type: object
            properties:
                membershipId:
                    type: string
                    description: 成员关系ID
                organizationId:
                    type: string
                    description: 组织ID
                organizationName:
                    type: string
                    description: 组织名称
                organizationCode:
                    type: string
                    description: 组织代码
                status:
                    type: integer
                    description: 成员状态
                    format: int32
                role:
                    type: integer
                    description: 成员角色
                    format: int32
                position:
                    type: string
                    description: 申请职位
                joinDate:
                    type: string
                    description: 加入时间
                reviewDate:
                    type: string
                    description: 审核时间
                reviewComment:
                    type: string
                    description: 审核意见
                createdAt:
                    type: string
                    description: 创建时间
                updatedAt:
                    type: string
                    description: 更新时间
            description: OrganizationMemberInfo 组织成员信息（用于志愿者视角）
        membership.OrganizationMembersResponse:
            type: object
            properties:
                total:
                    type: integer
                    format: int32
                list:
                    type: array
                    items:
                        $ref: '#/components/schemas/membership.MemberInfo'
            description: OrganizationMembersResponse 获取组织成员响应
        membership.VolunteerJoinRequest:
            type: object
            properties:
                volunteerId:
                    type: string
                    description: '志愿者ID 必填 @gotags: json:"volunteerId,required"'
                organizationId:
                    type: string
                    description: '组织ID 必填 @gotags: json:"organizationId,required"'
            description: VolunteerJoinRequest 志愿者加入组织请求
        membership.VolunteerJoinResponse:
            type: object
            properties:
                membershipId:
                    type: string
                    description: 成员关系ID
                status:
                    type: integer
                    description: 状态
                    format: int32
                message:
                    type: string
                    description: 消息
            description: VolunteerJoinResponse 志愿者加入组织响应
        membership.VolunteerLeaveRequest:
            type: object
            properties:
                membershipId:
                    type: string
                    description: '成员关系ID 必填 @gotags: json:"membershipId,required"'
                reason:
                    type: string
                    description: '退出原因 可选 @gotags: json:"reason"'
            description: VolunteerLeaveRequest 志愿者退出组织请求
        membership.VolunteerLeaveResponse:
            type: object
            properties:
                message:
                    type: string
                    description: 消息
            description: VolunteerLeaveResponse 志愿者退出组织响应
        membership.VolunteerOrganizationsResponse:
            type: object
            properties:
                total:
                    type: integer
                    format: int32
                list:
                    type: array
                    items:
                        $ref: '#/components/schemas/membership.OrganizationMemberInfo'
            description: VolunteerOrganizationsResponse 查询志愿者加入的组织响应
tags:
    - name: MembershipService
