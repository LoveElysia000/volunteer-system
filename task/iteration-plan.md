# 志愿者服务平台迭代计划（2026 Q1）

## 1. 迭代总览

| 迭代 | 时间 | 目标 |
| --- | --- | --- |
| Iteration 1 | 2026-02-16 ~ 2026-02-20 | 接口稳定化与模型一致性（P0） |
| Iteration 2 | 2026-02-23 ~ 2026-02-27 | 审核域闭环（P0） |
| Iteration 3 | 2026-03-02 ~ 2026-03-06 | 工时与活动结果闭环（P0/P1） |
| Iteration 4 | 2026-03-09 ~ 2026-03-20 | 数据导入导出 + 证书生成（P1） |

---

## 2. Iteration 1（2026-02-16 ~ 2026-02-20）

### 目标

先完成接口与模型层的稳定化，清理当前不一致点，避免后续迭代返工。

### 范围

1. 补齐志愿者 `MyProfile` 的完整链路（router/handler/service）。
2. 修正志愿者详情 path 参数命名不一致问题。
3. 解决组织路由中列表与创建同路径冲突问题。
4. 完成 `organizations.status` 与 `sys_accounts.status` 的一致性策略与代码实现。
5. 移除组织服务中对 `organizations.audit_status` 的遗留依赖。

### 交付物

1. 路由与 Proto/OpenAPI 一致。
2. 组织状态启停行为可预测且可回归。
3. 基础回归测试通过（核心接口可用）。

---

## 3. Iteration 2（2026-02-23 ~ 2026-02-27）

### 目标

建立统一审核流，覆盖成员、志愿者、组织、活动报名等审核目标。

### 范围

1. 扩展审核目标：志愿者实名、组织资质、活动报名。
2. 活动报名创建审核记录，审核通过后再变更业务状态。
3. 完善审核列表能力（状态/关键词/分页）与权限校验。
4. 统一审核记录落库与结果状态映射。

### 交付物

1. 四类审核目标具备「发起-审批-查询」完整链路。
2. 审核状态与业务状态映射清晰且可测试。

---

## 4. Iteration 3（2026-03-02 ~ 2026-03-06）

### 目标

打通活动参与到工时沉淀的结果闭环，形成可统计、可审计的数据链路。

### 范围

1. 实现 `work_hour_logs` 对应的 model/repository/service/router。
2. 新增签到/签退能力，并与活动执行状态联动。
3. 工时发放与回写志愿者统计字段（`total_hours`、`service_count`）。
4. 明确工时作废/重算策略（幂等处理）。

### 交付物

1. 工时流水可查询、可追溯。
2. 志愿者统计数据与流水一致。

---

## 5. Iteration 4（2026-03-09 ~ 2026-03-20）

### 目标

完成运营能力建设：批量数据处理与证书生成。

### 范围

1. 志愿者/活动数据导入导出（Excel/CSV）。
2. 导入结果回执（失败行与原因）与任务状态查询。
3. 证书模板管理、证书生成、PDF 下载。
4. 关键操作审计记录。

### 交付物

1. 后台可执行批量导入导出。
2. 志愿者服务证书可生成并下载。

---

## 6. 每迭代统一 DoD

1. 接口实现、路由定义、Proto/OpenAPI 三者一致。
2. 核心流程具备集成测试（成功路径 + 权限拒绝路径）。
3. 数据迁移脚本可回放且与代码模型一致。
4. 关键变更有回归清单并通过验证。

---

## 7. 依赖与风险

1. 数据库脚本版本与当前运行环境需保持一致（特别是 `organizations` 结构变更）。
2. 审核域扩展会影响多个服务，需要统一状态枚举与错误码规范。
3. 导入导出与证书功能建议采用异步任务模型，避免接口超时。
